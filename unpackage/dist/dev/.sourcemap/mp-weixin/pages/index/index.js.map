{"version":3,"file":"index.js","sources":["pages/index/index.vue","D:/HBuiderX/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n\t\r\n\t<view class='search'>\r\n\t\t<uni-search-bar @confirm=\"search\" :focus=\"true\" v-model=\"searchValue\"  @input=\"input\" @cancel=\"cancel\" @change=\"change\">\r\n\t\t</uni-search-bar>\r\n\t</view>\r\n\t<view class='navigator'>\r\n\t\t<view \r\n\t\t\tv-for=\"(item, index) in navList\" \r\n\t\t\t:key=\"index\" \r\n\t\t\tclass=\"nav-item\"\r\n\t\t\t:class=\"{ navigatorbar:true,active: currentIndex === index }\"\r\n\t\t\t@click=\"switchTab(index)\"\r\n\t\t  >\r\n\t\t\t{{ item }}\r\n\t\t</view>\r\n\t</view>\r\n\t\t<swiper \r\n\t\t\t:current=\"currentIndex\" \r\n\t\t\t@change=\"onSwiperChange\"\r\n\t\t\t:style=\"{ height: swiperHeight + 'rpx' }\">\r\n\t\t    <swiper-item v-for=\"(item, index) in navList\" :key=\"index\">\r\n\t\t\t<scroll-view scroll-y :style=\"{ height: swiperHeight + 'rpx' }\">\r\n\t\t\t  <view v-if=\"index === 0\">\r\n\t\t\t\t  <button @click=\"test('1')\">联系id：1</button> \r\n\t\t\t\t  <button @click=\"test('3')\">联系id：3</button> \r\n\t\t\t  </view>\r\n\t\t\t\t\t\r\n\t\t\t  <view v-if=\"index === 1\">2\r\n\t\t\t  </view>\r\n\r\n\t\t\t  <view v-if=\"index === 2\">3\r\n\t\t\t  </view>\r\n\t\t\t  </scroll-view>\r\n\t\t  </swiper-item>\r\n\t\t</swiper>\r\n\t\n  </view>\n</template>\n<script setup lang=\"ts\">\n\timport { reactive, ref } from 'vue'\r\n\timport Vue from 'vue';\r\n\t//websocket\r\n\timport {getCurrentInstance, onMounted} from \"vue\"\r\n\timport {onLoad} from '@dcloudio/uni-app'\r\n\timport { ChatMessage,ChatSession } from '../../static/interface/chat';\r\n\timport { useChatStore } from '../../store/chatStore';\r\n\timport { useUserStore } from '../../store/useUserStore';\r\n\timport { storeToRefs } from 'pinia';\n\tconst chatStore=useChatStore()\r\n\tconst userStore=useUserStore()\r\n\t//接收消息\r\n\tinterface Message {\r\n\t  id: number\r\n\t  content: string\r\n\t  time: number\r\n\t  isMe: boolean\r\n\t}\r\n\t\r\n\t\r\n\tlet data:any;\r\n\t\n\tlet searchValue = ref(\"\");\r\n\r\n\tlet navList =ref(['推荐', '新发', '附近']);\r\n\tlet currentIndex=ref(0);\r\n\tlet systemInfo = uni.getSystemInfoSync();\r\n\tlet swiperHeight=ref(0);\r\n\tonLoad(() => {\r\n\t  const systemInfo = uni.getWindowInfo();\r\n\t  uni.__f__('log','at pages/index/index.vue:72',\"index:\",userStore.meta.isLoggedin)\r\n\t  swiperHeight.value = systemInfo.windowHeight - 50 \r\n\t})\r\n\t\r\n\tfunction switchTab(index: any) {\r\n\t  currentIndex.value = index;\r\n\t}\r\n\t\r\n\t// swiper 滑动事件\r\n\tfunction onSwiperChange(e) {\r\n\t  currentIndex.value = e.detail.current;\r\n\t}\r\n\t\r\n\t\r\n\tfunction search(res){\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '搜索：' + res.value,\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\t\r\n\tfunction input(res){\r\n\t\tuni.__f__('log','at pages/index/index.vue:94','input--',res);\r\n\t}\r\n\t\r\n\tfunction cancel(res){\r\n\t\tuni.__f__('log','at pages/index/index.vue:98',\"cacel\",res);\r\n\t}\r\n\t\r\n\tfunction change(res){\r\n\t\tuni.__f__('log','at pages/index/index.vue:102',\"change\",res)\r\n\t}\r\n\t\r\n\tconst test = (contactId: string) => {\r\n\t\tchatStore.createSession(contactId)\r\n\t\tconst chat=ref({\r\n\t\t\tid:\"\",\r\n\t\t\tusername:\"\",\r\n\t\t\tavatar:\"\",\r\n\t\t})\r\n\t  \r\n\t\r\n\ttry {\r\n\t\tconst res :any= uni.request({\r\n\t\t\turl: `https://192.168.43.78/${contactId}`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata:\"\",\r\n\t\t})\r\n\t\t\r\n\t\tif (res.statusCode === 200) {\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:122',\"用户信息获取成功：\",res)\r\n\t\t\tchat.value.id=res.data.id\r\n\t\t\tchat.value.avatar=res.data.img\r\n\t\t\tchat.value.username=res.data.username\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tuni.__f__('error','at pages/index/index.vue:128','用户信息获取失败:', error)\r\n\t\t}\r\n\tchatStore.updatereceiverId(contactId)\r\n\t\r\n\tuni.navigateTo({\r\n\t  \turl:`/pages/communicateDetails/communicateDetails?id=${chat.value.id}&username=${chat.value.username}&avatar=${chat.value.avatar}`\r\n\t});\r\n\t  \r\n\t}\n</script>\n\n\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t  margin: 0;\r\n\t  padding: 0;\r\n\t  height: 100%;\r\n\t}\r\n\t\r\n\t.container {\r\n\t  display: flex;\r\n\t  flex-direction: column;\r\n\t  width: 100vw;\r\n\t  height: 100vh;\r\n\t  background: #f8f8f8;\r\n\t  \r\n\t}\r\n\t\r\n\t.search {\r\n\t  padding: 20rpx 30rpx;\r\n\t  background: #fff;\r\n\t  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.08);\r\n\t}\r\n\t\r\n\n\n.navigator {\n  display: flex;\n  height: 65rpx;  \n  position: relative;\n  background: #fff;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.06);\n  border-bottom: 1rpx solid #f5f5f5; \n\n  white-space: nowrap;\n  overflow-x: auto;\n}\n\n.nav-item {\n  flex: 1;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 28rpx;\n  color: #666;\n  position: relative;\n  transition: all 0.3s;\n\n  &.active {\n    color: #007AFF;\n    font-weight: 500;\n\t//下划线\n    &::after {\n      content: '';\n      position: absolute;\n      left: 50%;\n      bottom: 8rpx;\n      width: 60rpx;\n      height: 4rpx;\n      background: #007AFF;\n      transform: translateX(-50%);\n      border-radius: 2rpx;\n      transition: all 0.3s;\n    }\n  }\n\n  // 点击\n  &:active {\n    background: rgba(0,122,255,0.05);\n  }\n}\n\n</style>\n","import MiniProgramPage from 'E:/uniappWorkSpace/SaltyFish/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["useChatStore","useUserStore","ref","uni","onLoad","systemInfo"],"mappings":";;;;;;;;;;;;;;;AAkDC,UAAM,YAAUA,gBAAAA;AAChB,UAAM,YAAUC,mBAAAA;AAYZ,QAAA,cAAcC,kBAAI,EAAE;AAExB,QAAI,UAASA,cAAAA,IAAI,CAAC,MAAM,MAAM,IAAI,CAAC;AAC/B,QAAA,eAAaA,kBAAI,CAAC;AACLC,kBAAAA,MAAI,kBAAkB;AACnC,QAAA,eAAaD,kBAAI,CAAC;AACtBE,kBAAAA,OAAO,MAAM;AACLC,YAAAA,cAAaF,oBAAI;AACvBA,0BAAI,MAAM,OAAM,+BAA8B,UAAS,UAAU,KAAK,UAAU;AACnE,mBAAA,QAAQE,YAAW,eAAe;AAAA,IAAA,CAChD;AAED,aAAS,UAAU,OAAY;AAC7B,mBAAa,QAAQ;AAAA,IACvB;AAGA,aAAS,eAAe,GAAG;AACZ,mBAAA,QAAQ,EAAE,OAAO;AAAA,IAChC;AAGA,aAAS,OAAO,KAAI;AACnBF,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO,QAAQ,IAAI;AAAA,QACnB,MAAM;AAAA,MAAA,CACN;AAAA,IACF;AAEA,aAAS,MAAM,KAAI;AAClBA,oBAAA,MAAI,MAAM,OAAM,+BAA8B,WAAU,GAAG;AAAA,IAC5D;AAEA,aAAS,OAAO,KAAI;AACnBA,oBAAA,MAAI,MAAM,OAAM,+BAA8B,SAAQ,GAAG;AAAA,IAC1D;AAEA,aAAS,OAAO,KAAI;AACnBA,oBAAA,MAAI,MAAM,OAAM,gCAA+B,UAAS,GAAG;AAAA,IAC5D;AAEM,UAAA,OAAO,CAAC,cAAsB;AACnC,gBAAU,cAAc,SAAS;AACjC,YAAM,OAAKD,cAAAA,IAAI;AAAA,QACd,IAAG;AAAA,QACH,UAAS;AAAA,QACT,QAAO;AAAA,MAAA,CACP;AAGE,UAAA;AACG,cAAA,MAAUC,oBAAI,QAAQ;AAAA,UAC3B,KAAK,yBAAyB,SAAS;AAAA,UACvC,QAAQ;AAAA,UACR,MAAK;AAAA,QAAA,CACL;AAEG,YAAA,IAAI,eAAe,KAAK;AAC3BA,wBAAA,MAAI,MAAM,OAAM,gCAA+B,aAAY,GAAG;AACzD,eAAA,MAAM,KAAG,IAAI,KAAK;AAClB,eAAA,MAAM,SAAO,IAAI,KAAK;AACtB,eAAA,MAAM,WAAS,IAAI,KAAK;AAAA,QAC9B;AAAA,eACQ,OAAO;AACfA,sBAAA,MAAI,MAAM,SAAQ,gCAA+B,aAAa,KAAK;AAAA,MACnE;AACD,gBAAU,iBAAiB,SAAS;AAEpCA,oBAAAA,MAAI,WAAW;AAAA,QACZ,KAAI,mDAAmD,KAAK,MAAM,EAAE,aAAa,KAAK,MAAM,QAAQ,WAAW,KAAK,MAAM,MAAM;AAAA,MAAA,CAClI;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIF,GAAG,WAAW,eAAe;"}